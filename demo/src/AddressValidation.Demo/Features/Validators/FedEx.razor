@page "/validator/fedex"
@using AddressValidation.Demo.Models.Forms
@using Visus.AddressValidation.Abstractions
@inherits AddressValidation.Demo.Features.Validators.Abstractions.AbstractValidatorComponent<Visus.AddressValidation.Integration.FedEx.Http.FedExAddressValidationRequest, AddressValidation.Demo.Models.Forms.FedExAddressValidationFormModel>

<PageTitle>FedEx Address Validation</PageTitle>

<h1>FedEx Address Validation Dem1</h1>

<RadzenStack>
    <RadzenRow>
        <RadzenColumn SizeXL="6" SizeLG="6">
            <RadzenStack>
                <LoadingIndicator @ref="SettingsLoadingIndicator">
                    <RadzenTemplateForm TItem="OAuthApiSettingsFormModel"
                                        Data="@_settingsFormModel"
                                        Submit="OnSettingsFormSubmitAsync">
                        <RadzenFieldset AllowCollapse="true"
                                        Text="Settings">
                            <RadzenRow>
                                <RadzenColumn>
                                    <RadzenFormField AllowFloatingLabel="false"
                                                     Component="AccountNumber"
                                                     Style="width: 100%"
                                                     Text="Account Number"
                                                     Variant="Variant.Outlined">
                                        <ChildContent>
                                            <RadzenNumeric MaxLength="9"
                                                           Name="AccountNumber"
                                                           ShowUpDown="false"
                                                           TValue="string?"
                                                           @bind-Value="@_settingsFormModel.AccountNumber"/>
                                        </ChildContent>
                                        <Helper>
                                            <RadzenRequiredValidator Component="AccountNumber"/>
                                        </Helper>
                                    </RadzenFormField>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow>
                                <RadzenColumn>
                                    <RadzenFormField AllowFloatingLabel="false"
                                                     Component="ClientEnvironment"
                                                     Style="width: 100%"
                                                     Text="Environment"
                                                     Variant="Variant.Outlined">
                                        <RadzenDropDown AllowClear="false"
                                                        AllowFiltering="false"
                                                        AllowVirtualization="true"
                                                        Data="@_clientEnvironments"
                                                        Name="Environment"
                                                        Style="width: 100%"
                                                        TextProperty="Key"
                                                        TValue="ClientEnvironment"
                                                        ValueProperty="Value"
                                                        @bind-Value="@_settingsFormModel.ClientEnvironment"/>
                                    </RadzenFormField>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow>
                                <RadzenColumn>
                                    <RadzenFormField AllowFloatingLabel="false"
                                                     Component="ClientId"
                                                     Style="width: 100%"
                                                     Text="Client ID"
                                                     Variant="Variant.Outlined">
                                        <ChildContent>
                                            <RadzenTextBox class="avd-input-text-masked"
                                                           Name="ClientId"
                                                           Style="width: 100%"
                                                           Trim="true"
                                                           @bind-Value="@_settingsFormModel.ClientId"/>
                                        </ChildContent>
                                        <Helper>
                                            <RadzenRequiredValidator Component="ClientId"/>
                                        </Helper>
                                    </RadzenFormField>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow>
                                <RadzenColumn>
                                    <RadzenFormField AllowFloatingLabel="false"
                                                     Component="ClientSecret"
                                                     Style="width: 100%"
                                                     Text="Client Secret"
                                                     Variant="Variant.Outlined">
                                        <ChildContent>
                                            <RadzenPassword Name="ClientSecret"
                                                            Style="width: 100%"
                                                            @bind-Value="@_settingsFormModel.ClientSecret"/>
                                        </ChildContent>
                                        <Helper>
                                            <RadzenRequiredValidator Component="ClientSecret"/>
                                        </Helper>
                                    </RadzenFormField>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow class="rz-pt-10">
                                <RadzenButton ButtonStyle="ButtonStyle.Primary"
                                              ButtonType="ButtonType.Submit"
                                              Text="Save"
                                              Variant="Variant.Flat"/>
                            </RadzenRow>
                        </RadzenFieldset>
                    </RadzenTemplateForm>
                </LoadingIndicator>
                <LoadingIndicator @ref="ValidateLoadingIndicator">
                    <RadzenTemplateForm TItem="FedExAddressValidationFormModel"
                                        Data="@AddressValidationFormModel"
                                        Submit="OnAddressValidationFormSubmitAsync">
                        <RadzenFieldset AllowCollapse="false"
                                        Text="Address">
                            <RadzenRow>
                                <RadzenColumn>
                                    <RadzenFormField AllowFloatingLabel="false"
                                                     Component="AddressLine1"
                                                     Style="width: 100%"
                                                     Text="Address Line 1"
                                                     Variant="Variant.Outlined">
                                        <ChildContent>
                                            <RadzenTextBox AutoCompleteType="AutoCompleteType.AddressLine1"
                                                           Name="AddressLine1"
                                                           Style="width: 100%"
                                                           Trim="true"
                                                           @bind-Value="@AddressValidationFormModel.AddressLine1"/>
                                        </ChildContent>
                                        <Helper>
                                            <RadzenRequiredValidator Component="AddressLine1"/>
                                        </Helper>
                                    </RadzenFormField>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow>
                                <RadzenColumn>
                                    <RadzenFormField AllowFloatingLabel="false"
                                                     Component="AddressLine2"
                                                     Style="width: 100%"
                                                     Text="Address Line 2"
                                                     Variant="Variant.Outlined">
                                        <RadzenTextBox AutoCompleteType="AutoCompleteType.AddressLine2"
                                                       Name="AddressLine2"
                                                       Style="width: 100%"
                                                       Trim="true"
                                                       @bind-Value="@AddressValidationFormModel.AddressLine2"/>
                                    </RadzenFormField>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow>
                                <RadzenColumn Size="6">
                                    <RadzenFormField AllowFloatingLabel="false"
                                                     Component="CityOrTown"
                                                     Style="width: 100%"
                                                     Text="City"
                                                     Variant="Variant.Outlined">
                                        <RadzenTextBox AutoCompleteType="AutoCompleteType.AddressLevel1"
                                                       Name="CityOrTown"
                                                       Style="width: 100%"
                                                       Trim="true"
                                                       @bind-Value="@AddressValidationFormModel.CityOrTown"/>
                                    </RadzenFormField>
                                </RadzenColumn>
                                <RadzenColumn Size="6">
                                    <RadzenFormField AllowFloatingLabel="false"
                                                     Component="Province"
                                                     Style="width: 100%"
                                                     Text="State (Province)"
                                                     Variant="Variant.Outlined">
                                        <ChildContent>
                                            @if (Provinces.Count > 0)
                                            {
                                                <RadzenDropDown AllowClear="true"
                                                                AllowFiltering="true"
                                                                AllowVirtualization="true"
                                                                Change="OnProvinceChangedAsync"
                                                                Data="@Provinces"
                                                                FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
                                                                Name="Province"
                                                                Style="width: 100%"
                                                                TextProperty="Value"
                                                                ValueProperty="Key"
                                                                @bind-Value="@AddressValidationFormModel.StateOrProvince"/>
                                            }
                                            else
                                            {
                                                <RadzenTextBox AutoCompleteType="AutoCompleteType.AddressLevel2"
                                                               Trim="true"
                                                               @bind-Value="@AddressValidationFormModel.StateOrProvince"/>
                                            }
                                        </ChildContent>
                                        <Helper>
                                            <RadzenRequiredValidator Component="Province"/>
                                        </Helper>
                                    </RadzenFormField>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow>
                                <RadzenColumn Size="6">
                                    <RadzenFormField AllowFloatingLabel="false"
                                                     Component="PostalCode"
                                                     Text="Postal Code"
                                                     Variant="Variant.Outlined">
                                        <ChildContent>
                                            <RadzenTextBox AutoCompleteType="AutoCompleteType.PostalCode"
                                                           Name="PostalCode"
                                                           Trim="true"
                                                           @bind-Value="@AddressValidationFormModel.PostalCode"/>
                                        </ChildContent>
                                        <Helper>
                                            <RadzenRequiredValidator Component="PostalCode"/>
                                        </Helper>
                                    </RadzenFormField>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow class="rz-pt-10">
                                <RadzenButton Disabled="@ValidateLoadingIndicator.IsVisible"
                                              ButtonStyle="ButtonStyle.Primary" ButtonType="ButtonType.Submit"
                                              Variant="Variant.Flat" Text="Validate"/>
                                <RadzenButton Disabled="@ValidateLoadingIndicator.IsVisible"
                                              ButtonStyle="ButtonStyle.Secondary" ButtonType="ButtonType.Reset"
                                              Variant="Variant.Flat" Text="Clear"/>
                            </RadzenRow>
                        </RadzenFieldset>
                    </RadzenTemplateForm>
                </LoadingIndicator>
            </RadzenStack>
        </RadzenColumn>
        <RadzenColumn SizeXL="6" SizeLG="6">
            <RadzenStack>
                <LoadingIndicator @ref="ResponseLoadingIndicator">
                    <RadzenFieldset Style="width: 100%" Text="Response">
                        <SyntaxHighlighter Language="json">@ResponseJson</SyntaxHighlighter>
                    </RadzenFieldset>
                </LoadingIndicator>
                <LoadingIndicator @ref="RequestLoadingIndicator">
                    <RadzenFieldset Style="width: 100%" Text="Request">
                        <SyntaxHighlighter Language="json">@RequestJson</SyntaxHighlighter>
                    </RadzenFieldset>
                </LoadingIndicator>
            </RadzenStack>
        </RadzenColumn>
    </RadzenRow>
</RadzenStack>
