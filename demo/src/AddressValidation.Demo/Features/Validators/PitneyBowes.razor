@page "/validator/pitney-bowes"
@using AddressValidation.Demo.Models.Forms
@using Visus.AddressValidation.Abstractions
@inherits AddressValidation.Demo.Features.Validators.Abstractions.AbstractValidatorComponent<Visus.AddressValidation.Integration.PitneyBowes.Http.PitneyBowesAddressValidationRequest, AddressValidation.Demo.Models.Forms.PitneyBowesAddressValidationFormModel>

<PageTitle>Pitney Bowes Address Validator</PageTitle>

<h1>Pitney Bowes Address Validation Demo</h1>

<RadzenStack>
    <RadzenRow>
        <RadzenColumn SizeXL="6" SizeLG="6">
            <LoadingIndicator @ref="SettingsLoadingIndicator">
                <RadzenTemplateForm TItem="PitneyBowesApiSettingsFormModel"
                                    Data="@_settingsFormModel"
                                    Submit="OnSettingsFormSubmitAsync">
                    <RadzenFieldset AllowCollapse="true"
                                    Text="Settings">
                        <RadzenRow>
                            <RadzenColumn>
                                <RadzenFormField AllowFloatingLabel="false"
                                                 Component="DeveloperId"
                                                 Style="width: 100%"
                                                 Text="Developer ID"
                                                 Variant="Variant.Outlined">
                                    <ChildContent>
                                        <RadzenTextBox Name="DeveloperId"
                                                       Style="width: 100%"
                                                       Trim="true"
                                                       @bind-Value="@_settingsFormModel.DeveloperId"/>
                                    </ChildContent>
                                    <Helper>
                                        <RadzenRequiredValidator Component="DeveloperId"/>
                                    </Helper>
                                </RadzenFormField>
                            </RadzenColumn>
                        </RadzenRow>
                        <RadzenRow>
                            <RadzenColumn>
                                <RadzenFormField AllowFloatingLabel="false"
                                                 Component="ClientEnvironment"
                                                 Style="width: 100%"
                                                 Text="Environment"
                                                 Variant="Variant.Outlined">
                                    <RadzenDropDown AllowClear="false"
                                                    AllowFiltering="false"
                                                    AllowVirtualization="true"
                                                    Data="@_clientEnvironments"
                                                    Name="Environment"
                                                    Style="width: 100%"
                                                    TextProperty="Key"
                                                    TValue="ClientEnvironment"
                                                    ValueProperty="Value"
                                                    @bind-Value="@_settingsFormModel.ClientEnvironment"/>
                                </RadzenFormField>
                            </RadzenColumn>
                        </RadzenRow>
                        <RadzenRow>
                            <RadzenColumn>
                                <RadzenFormField AllowFloatingLabel="false"
                                                 Component="ApiKey"
                                                 Style="width: 100%"
                                                 Text="API Key"
                                                 Variant="Variant.Outlined">
                                    <ChildContent>
                                        <RadzenTextBox class="avd-input-text-masked"
                                                       Name="ApiKey"
                                                       Style="width: 100%"
                                                       Trim="true"
                                                       @bind-Value="@_settingsFormModel.ApiKey"/>
                                    </ChildContent>
                                    <Helper>
                                        <RadzenRequiredValidator Component="ApiKey"/>
                                    </Helper>
                                </RadzenFormField>
                            </RadzenColumn>
                        </RadzenRow>
                        <RadzenRow>
                            <RadzenColumn>
                                <RadzenFormField AllowFloatingLabel="false"
                                                 Component="ApiSecret"
                                                 Style="width: 100%"
                                                 Text="API Secret"
                                                 Variant="Variant.Outlined">
                                    <ChildContent>
                                        <RadzenPassword Name="ApiSecret"
                                                        Style="width: 100%"
                                                        @bind-Value="@_settingsFormModel.ApiSecret"/>
                                    </ChildContent>
                                    <Helper>
                                        <RadzenRequiredValidator Component="ApiSecret"/>
                                    </Helper>
                                </RadzenFormField>
                            </RadzenColumn>
                        </RadzenRow>
                        <RadzenRow class="rz-pt-10">
                            <RadzenButton ButtonStyle="ButtonStyle.Primary"
                                          ButtonType="ButtonType.Submit"
                                          Text="Save"
                                          Variant="Variant.Flat"/>
                        </RadzenRow>
                    </RadzenFieldset>
                </RadzenTemplateForm>
            </LoadingIndicator>
            <LoadingIndicator @ref="ValidateLoadingIndicator">
                <RadzenTemplateForm TItem="PitneyBowesAddressValidationFormModel"
                                    Data="@AddressValidationFormModel"
                                    Submit="OnAddressValidationFormSubmitAsync">
                    <RadzenFieldset AllowCollapse="false"
                                    Text="Address">
                        <RadzenRow>
                            <RadzenColumn>
                                <RadzenFormField AllowFloatingLabel="false"
                                                 Component="AddressLine1"
                                                 Style="width: 100%"
                                                 Text="Address Line 1"
                                                 Variant="Variant.Outlined">
                                    <ChildContent>
                                        <RadzenTextBox AutoCompleteType="AutoCompleteType.AddressLine1"
                                                       Name="AddressLine1"
                                                       Style="width: 100%"
                                                       Trim="true"
                                                       @bind-Value="@AddressValidationFormModel.AddressLine1"/>
                                    </ChildContent>
                                    <Helper>
                                        <RadzenRequiredValidator Component="AddressLine1"/>
                                    </Helper>
                                </RadzenFormField>
                            </RadzenColumn>
                        </RadzenRow>
                        <RadzenRow>
                            <RadzenColumn>
                                <RadzenFormField AllowFloatingLabel="false"
                                                 Component="AddressLine2"
                                                 Style="width: 100%"
                                                 Text="Address Line 2"
                                                 Variant="Variant.Outlined">
                                    <RadzenTextBox AutoCompleteType="AutoCompleteType.AddressLine2"
                                                   Name="AddressLine2"
                                                   Style="width: 100%"
                                                   Trim="true"
                                                   @bind-Value="@AddressValidationFormModel.AddressLine2"/>
                                </RadzenFormField>
                            </RadzenColumn>
                        </RadzenRow>
                        <RadzenRow>
                            <RadzenColumn Size="6">
                                <RadzenFormField AllowFloatingLabel="false"
                                                 Component="CityOrTown"
                                                 Style="width: 100%"
                                                 Text="City"
                                                 Variant="Variant.Outlined">
                                    <RadzenTextBox AutoCompleteType="AutoCompleteType.AddressLevel1"
                                                   Name="CityOrTown"
                                                   Style="width: 100%"
                                                   Trim="true"
                                                   @bind-Value="@AddressValidationFormModel.CityOrTown"/>
                                </RadzenFormField>
                            </RadzenColumn>
                            <RadzenColumn Size="6">
                                <RadzenFormField AllowFloatingLabel="false"
                                                 Component="Province"
                                                 Style="width: 100%"
                                                 Text="State (Province)"
                                                 Variant="Variant.Outlined">
                                    <ChildContent>
                                        @if (Provinces.Count > 0)
                                        {
                                            <RadzenDropDown AllowClear="true"
                                                            AllowFiltering="true"
                                                            AllowVirtualization="true"
                                                            Change="OnProvinceChangedAsync"
                                                            Data="@Provinces"
                                                            FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
                                                            Name="Province"
                                                            Style="width: 100%"
                                                            TextProperty="Value"
                                                            ValueProperty="Key"
                                                            @bind-Value="@AddressValidationFormModel.StateOrProvince"/>
                                        }
                                        else
                                        {
                                            <RadzenTextBox AutoCompleteType="AutoCompleteType.AddressLevel2"
                                                           Trim="true"
                                                           @bind-Value="@AddressValidationFormModel.StateOrProvince"/>
                                        }
                                    </ChildContent>
                                    <Helper>
                                        <RadzenRequiredValidator Component="Province"/>
                                    </Helper>
                                </RadzenFormField>
                            </RadzenColumn>
                        </RadzenRow>
                        <RadzenRow>
                            <RadzenColumn Size="6">
                                <RadzenFormField AllowFloatingLabel="false"
                                                 Component="PostalCode"
                                                 Text="Postal Code"
                                                 Variant="Variant.Outlined">
                                    <ChildContent>
                                        <RadzenTextBox AutoCompleteType="AutoCompleteType.PostalCode"
                                                       Name="PostalCode"
                                                       Trim="true"
                                                       @bind-Value="@AddressValidationFormModel.PostalCode"/>
                                    </ChildContent>
                                    <Helper>
                                        <RadzenRequiredValidator Component="PostalCode"/>
                                    </Helper>
                                </RadzenFormField>
                            </RadzenColumn>
                        </RadzenRow>
                        <RadzenRow class="rz-pt-10">
                            <RadzenButton Disabled="@ValidateLoadingIndicator.IsVisible"
                                          ButtonStyle="ButtonStyle.Primary" ButtonType="ButtonType.Submit"
                                          Variant="Variant.Flat" Text="Validate"/>
                            <RadzenButton Disabled="@ValidateLoadingIndicator.IsVisible"
                                          ButtonStyle="ButtonStyle.Secondary" ButtonType="ButtonType.Reset"
                                          Variant="Variant.Flat" Text="Clear"/>
                        </RadzenRow>
                    </RadzenFieldset>
                </RadzenTemplateForm>
            </LoadingIndicator>
        </RadzenColumn>
        <RadzenColumn SizeXL="6" SizeLG="6">
            <RadzenStack>
                <LoadingIndicator @ref="RequestLoadingIndicator">
                    <RadzenFieldset Style="width: 100%" Text="Request">
                        <SyntaxHighlighter Language="json">@RequestJson</SyntaxHighlighter>
                    </RadzenFieldset>
                </LoadingIndicator>
                <LoadingIndicator @ref="ResponseLoadingIndicator">
                    <RadzenFieldset Style="width: 100%" Text="Response">
                        <SyntaxHighlighter Language="json">@ResponseJson</SyntaxHighlighter>
                    </RadzenFieldset>
                </LoadingIndicator>
            </RadzenStack>
        </RadzenColumn>
    </RadzenRow>
</RadzenStack>
